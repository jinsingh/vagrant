<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<!-- Datasources -->
		<bean id="SITI-dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
		<property name="jndiName" value="java:comp/env/jdbc/siti"/>
	</bean>

	<bean id="KNOW-dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
		<property name="jndiName" value="java:comp/env/jdbc/siti_knowledge"/>
	</bean>

	<bean id="FASC-dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
		<property name="jndiName" value="java:comp/env/jdbc/fascicolo"/>
	</bean>


	<!-- SITI -->
	<bean id="SITI-transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		<property name="dataSource" ref="SITI-dataSource" />
	</bean>

	<bean id="SITI-transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
		<property name="transactionManager" ref="SITI-transactionManager" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>

	<bean id="SITI-sequenceService" class="com.abacogroup.commons.persistence.sequenceImpl.OracleSequence">
		<property name="dataSource" ref="SITI-dataSource" />
	</bean>

	<bean id="SITI-configurationService"	class="com.abacogroup.commons.config.impl.DatabaseConfigurationService">
		<property name="dataSource" ref="SITI-dataSource" />
		<property name="tableName" value="GISPARAMS" />
		<property name="keyColumnName" value="VARIABILE" />
		<property name="valueColumnName" value="VALORE" />
	</bean>

	<!-- Knowledge -->
	<bean id="KNOW-transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		<property name="dataSource" ref="KNOW-dataSource" />
	</bean>

	<bean id="KNOW-transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
		<property name="transactionManager" ref="KNOW-transactionManager" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>

	<bean id="KNOW-sequenceService" class="com.abacogroup.commons.persistence.sequenceImpl.OracleSequence">
		<property name="dataSource" ref="KNOW-dataSource" />
	</bean>

	<bean id="KNOW-configurationService"	class="com.abacogroup.commons.config.impl.VolatileMemoryConfigurationService">
	</bean>

	<!-- Fascicolo -->
	<bean id="FASC-transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		<property name="dataSource" ref="FASC-dataSource" />
	</bean>

	<bean id="FASC-transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
		<property name="transactionManager" ref="FASC-transactionManager" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>

	<bean id="FASC-sequenceService" class="com.abacogroup.commons.persistence.sequenceImpl.OracleSequence">
		<property name="dataSource" ref="FASC-dataSource" />
	</bean>

	<bean id="FASC-configurationService"	class="com.abacogroup.commons.config.impl.VolatileMemoryConfigurationService">
	</bean>


	<!-- Other stuff -->
	<bean id="nativeJdbcExtractor" class="com.abacogroup.commons.persistence.spring.jdbc.Tomcat6NativeJdbcExtractor" />

	<bean id="databaseDialect" class="com.abacogroup.commons.persistence.dialectImpl.OracleDialect">
		<property name="nativeJdbcExtractor" ref="nativeJdbcExtractor" />
	</bean>

	<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames">
			<list>
				<!-- AbacoCommons -->
				<value>com.abacogroup.commons.Messages</value>
			</list>
		</property>
	</bean>

	<!--
	<bean id="localeResolver" class="com.abacogroup.commons.context.spring.ContextLocaleResolver" />
	-->

</beans>