http:
    rootPath: "/*"
    port: <%= scope.function_hiera(["capd-matching-port"]) %>
    adminPort: <%= scope.function_hiera(["capd-matching-admin-port"]) %>

logging:
    file:
        enabled: true
        threshold: ALL
        currentLogFilename: ida-matching-service.log
        archive: false
        logFormat: '%date{ISO8601} level=[%level] logger=[%logger] thread=[%thread] message=[%message] %replace(exception=[%xException]){''^exception=\[\]$'',''''}%n%nopex'

sitiAgriClientConfiguration:
  sitiAgriBaseUrl: "http://<%= scope.function_hiera(["capd-ha-virtual-ipaddress"]) %>:<%= scope.function_hiera(["ha-gateway-port"]) %>/SitiAgriApi"
  healthCheckUri: /authorisation/privilege

database:

  # the SQL query to run when validating a connection's liveness
  validationQuery: "/* CAPDMATCHINGSERVICE Health Check */ SELECT 1 FROM DUAL"

  # the minimum number of connections to keep open
  minSize: 8

  # the maximum number of connections to keep open
  maxSize: 20

  # the name of your JDBC driver
  driverClass: oracle.jdbc.OracleDriver

  # the username
  user: <%= @capd_oracle_username %>

  # the password
  password: <%= @capd_oracle_capduser_password %>

  # the JDBC URL
  url: jdbc:oracle:thin:@(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = <%= @caporacledb_hostname %>)(PORT = <%= scope.function_hiera(["oracle-port"]) %>))(CONNECT_DATA = (SERVICE_NAME = <%= scope.function_hiera(['capd-oracle-sid'])%>)))

  # the maximum amount of time to wait on an empty pool before throwing an exception
  maxWaitForConnection: 5s

  # whether or not idle connections should be validated
  checkConnectionWhileIdle: false

  # how long a connection must be held before it can be validated
  checkConnectionHealthWhenIdleFor: 10s

  # the maximum lifetime of an idle connection
  closeConnectionIfIdleFor: 1 minute
